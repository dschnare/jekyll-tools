##########
# Jekyll #
##########

safe:        false
auto:        false
server:      false
server_port: 4000
baseurl:     /
url:         http://localhost:4000

source:      .
destination: _site
plugins:     ../_plugins
exclude:     ['_assets', '_src', 'README.md', 'Gemfile', 'Gemfile.lock', 'package.json']

future:      true
lsi:         false
pygments:    false
markdown:    maruku
permalink:   pretty

##################
# JSBuild Plugin #
##################

jsbuild:
  hooks: ../_plugins/tools/hooks/jsbuild.hook

  # Compile the third-party TypeScript files first
  # and save them at _src/_js
  "../_src/_js/some-framework.js":
    hooks: _src/hooks/typescript.rb
    include:
      - _assets/vendor/some-framework/module.ts
  # Now we can use the compiled TypeScript files.
  js/main-@hash.js:
    - _src/_js/some-framework.js
    - _src/js/main.js
  js/main.js:
    - _src/_js/some-framework.js
    - _src/js/main.js

####################
# LessBuild Plugin #
####################

lessbuild:
  hooks: ../_plugins/tools/hooks/lessbuild.hook

  css/main-@hash.css:
    main: _src/less/main.less
    include:
      - _src/less/*.less
      - { bootstrap: _assets/node_modules/bootstrap/less/*.less }
  css/main.css:
    main: _src/less/main.less
    include:
      - _src/less/*.less
      - { bootstrap: _assets/node_modules/bootstrap/less/*.less }

###############
# Copy Plugin #
###############

copy:
  page[0-9]/docs:
    - _assets/*.txt
  img:
    - _assets/node_modules/bootstrap/img/*.*

